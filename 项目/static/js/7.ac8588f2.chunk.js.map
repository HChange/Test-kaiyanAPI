{"version":3,"sources":["components/Scroll/Scroll.js","components/Tabs/Tabs.js","../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","pages/found/found.js"],"names":["Scroll","style","this","props","className","ref","children","BScroll","refs","scroll","tap","click","probeType","freeScroll","Component","tabList","id","title","icon","to","Tabs","map","item","key","_slicedToArray","arr","i","Array","isArray","Symbol","iterator","Object","prototype","toString","call","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","length","err","TypeError","memo","useState","search","setSearch","nextPageUrl","setUrl","category","setCategory","loadTitle","setLoadTitle","useRef","getData","flag","a","url","api","SEARCH","replace","current","get","data","itemList","itemDom","useMemo","filter","type","console","log","Math","random","pathname","state","src","cover","detail","alt","parseInt","duration","author","name","categoryDom","defaultAuthorId","onClick","bgPicture","useEffect","SHOW_CATEGORY","result","getCategory","onKeyDown","ev","keyCode","placeholder","autoFocus"],"mappings":"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","file":"static/js/7.ac8588f2.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport BScroll from \"better-scroll\";\r\nimport \"./style.scss\";\r\nexport default class Scroll extends Component {\r\n  render() {\r\n    return (\r\n      <div style={this.props.style}  className=\"scroll\" ref=\"scroll\">\r\n        <div className=\"scrollContent\">{this.props.children}</div>\r\n      </div>\r\n    );\r\n  }\r\n  componentDidMount() {\r\n    new BScroll(this.refs.scroll, {\r\n      tap: true,\r\n      click: true,\r\n      probeType: 3,\r\n      freeScroll:true\r\n      //下拉\r\n      // pullDownRefresh: {\r\n      //   threshold: 44.44,\r\n      //   // stop: 44.44\r\n      // },\r\n      // //上拉\r\n      // pullUpLoad: {\r\n      //   threshold: 44.44,\r\n      //   // pullDownRefresh: true, // 默认stop: 40\r\n      //   stop: 40\r\n      // },\r\n\r\n    });\r\n    //下拉\r\n    // scroll.on(\"pullingDown\", () => {\r\n    //   // this.getData();\r\n    //   // this.props.onRefresh();\r\n    //   scroll.finishPullDown();\r\n    //   scroll.refresh();\r\n    // });\r\n    // //上拉\r\n    // scroll.on(\"pullingUp\", () => {\r\n    //   // this.getData();\r\n      \r\n    //   setTimeout(() => {\r\n    //     console.log(111);\r\n    //    scroll.finishPullUp();\r\n    //     // scroll.refresh();\r\n    //   }, 10000);\r\n     \r\n    // });\r\n\r\n    \r\n\r\n    //下拉\r\n   \r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport \"./style.scss\";\r\nlet tabList = [\r\n  { id: 1, title: \"首页\", icon: \"iconfont icon-sanjiaoxing\", to: \"/home\" },\r\n  {\r\n    id: 2,\r\n    title: \"发现\",\r\n    icon: \"iconfont icon-zhengfangxing\",\r\n    to: \"/found\"\r\n  },\r\n  { id: 3, title: \"\", icon: \"iconfont icon-shangchuan\", to: \"/upload\" },\r\n  { id: 4, title: \"通知\", icon: \"iconfont icon-yuan\", to: \"/notice\" },\r\n  { id: 5, title: \"我的\", icon: \"iconfont icon-cha\", to: \"/mine\" }\r\n];\r\nexport default class Tabs extends Component {\r\n  render() {\r\n    return (\r\n      <div id=\"tabs\" className=\"border-top\">\r\n        {tabList.map(item => {\r\n\r\n          if(item.id===3){\r\n            return (\r\n              <NavLink key={item.id} to={item.to}>\r\n                <em className={item.icon}></em>\r\n              </NavLink>\r\n            );\r\n          }\r\n          return (\r\n            <NavLink key={item.id} to={item.to}>\r\n              <em className={item.icon}></em>\r\n              <span>{item.title}</span>\r\n            </NavLink>\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}","import React, { useRef, useState, useEffect, useMemo ,memo} from \"react\";\r\nimport Scroll from \"../../components/Scroll/Scroll\";\r\nimport Tabs from \"../../components/Tabs/Tabs\";\r\nimport { get } from \"../../utils/http\";\r\nimport api from \"../../utils/api\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./style.scss\";\r\n// import Header from \"../../components/Header/Header\";\r\nexport default memo(props => {\r\n  // 检索的结果\r\n  const [search, setSearch] = useState([]);\r\n  // 下一页链接\r\n  const [nextPageUrl, setUrl] = useState(\"\");\r\n  // 获得category\r\n  const [category, setCategory] = useState();\r\n  const [loadTitle, setLoadTitle] = useState(\"- The End -\");\r\n  const key = useRef();\r\n  // 获取数据\r\n  async function getData(flag) {\r\n    setLoadTitle(\"点击加载更多...\");\r\n    let url;\r\n    if (flag === \"next\") {\r\n      url = nextPageUrl;\r\n    } else if (flag) {\r\n      url = api.SEARCH.replace(\"{{key}}\", flag);\r\n    } else {\r\n      url = api.SEARCH.replace(\"{{key}}\", key.current.value);\r\n    }\r\n    //  console.log(url);\r\n    let data = await get(url);\r\n    // console.log(data);\r\n    if (data.nextPageUrl) {\r\n      setUrl(data.nextPageUrl.replace(\"http://baobab.kaiyanapp.com/\", \"/\"));\r\n    } else {\r\n      setUrl(\"\");\r\n    }\r\n\r\n    if (search.itemList && flag === \"next\") {\r\n      setSearch({\r\n        ...search,\r\n        itemList: [...search.itemList, ...data.itemList]\r\n      });\r\n    } else {\r\n      setSearch(data);\r\n    }\r\n    // console.log(search);\r\n  }\r\n  // 加载更多\r\n  function loadMoreAction() {\r\n    if (nextPageUrl) {\r\n      getData(\"next\");\r\n    } else {\r\n      setLoadTitle(\"- The End -\");\r\n    }\r\n  }\r\n  // 监听数据变化\r\n  let itemDom = useMemo(() => {\r\n    let itemDom =\r\n      search.itemList &&\r\n      search.itemList\r\n        .filter(item => item.type === \"video\")\r\n        .map(item => {\r\n          console.log(item);\r\n          return (\r\n            <div className=\"item border-bottom\" key={Math.random()}>\r\n              <Link\r\n                to={{\r\n                  pathname: \"/home/detail\",\r\n                  state: { id: item.data.id }\r\n                }}\r\n              >\r\n                <img\r\n                  src={item.data.cover.detail.replace(\r\n                    \"quality/60\",\r\n                    \"quality/1000\"\r\n                  )}\r\n                  alt={item.data.id}\r\n                />\r\n              </Link>\r\n              <span className=\"duration\">\r\n                {parseInt(item.data.duration / 60) < 10\r\n                  ? \"0\" + parseInt(item.data.duration / 60)\r\n                  : parseInt(item.data.duration / 60)}\r\n                :\r\n                {item.data.duration % 60 < 10\r\n                  ? \"0\" + (item.data.duration % 60)\r\n                  : item.data.duration % 60}\r\n              </span>\r\n              <div className=\"description\">\r\n                <div className=\"headIcon\">\r\n                  <img src={item.data.author.icon} alt={item.data.author.id} />\r\n                </div>\r\n                <div className=\"center text-overflow\">\r\n                  <h2 className=\"text-overflow\">{item.data.title}</h2>\r\n                  <p>\r\n                    <span className=\"text-overflow\">\r\n                      {item.data.author.name}\r\n                    </span>\r\n                    &nbsp;/&nbsp;\r\n                    <span>#{item.data.category}</span>\r\n                  </p>\r\n                </div>\r\n                <em className=\"iconfont icon-fenxiang\"></em>\r\n              </div>\r\n            </div>\r\n          );\r\n        });\r\n    return itemDom;\r\n  }, [search]);\r\n\r\n  let categoryDom =\r\n    category &&\r\n    category.map(item => {\r\n      return (\r\n        <div\r\n          className=\"categoryItem\"\r\n          key={item.defaultAuthorId}\r\n          onClick={() => {\r\n            getData(item.name);\r\n          }}\r\n        >\r\n          <img src={item.bgPicture} alt={item.defaultAuthorId} />\r\n          <span className=\"title\">#{item.name}</span>\r\n        </div>\r\n      );\r\n    });\r\n  useEffect(() => {\r\n    getCategory();\r\n    async function getCategory() {\r\n      let result = await get(api.SHOW_CATEGORY);\r\n      // console.log(result);\r\n      setCategory(result);\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"found page\">\r\n      <div className=\"top border-bottom\">\r\n        <input ref={key} onKeyDown={(ev)=>{\r\n\r\n          if(ev.keyCode===13){\r\n            key !== \"\" && getData();\r\n          }\r\n        }} placeholder=\"请输入关键词\" type=\"text\" autoFocus />\r\n        <span\r\n          onClick={() => {\r\n            key !== \"\" && getData();\r\n          }}\r\n        ></span>\r\n      </div>\r\n      <Scroll className=\"scroll\">\r\n        <h1>热门分类</h1>\r\n        <div className=\"hscroll\">\r\n          <div className=\"cateBox border-bottom\">{categoryDom}</div>\r\n        </div>\r\n        <div className=\"result\">{itemDom}</div>\r\n        <div className=\"loadMore\" onClick={loadMoreAction}>\r\n          {loadTitle}\r\n        </div>\r\n      </Scroll>\r\n      <Tabs />\r\n    </div>\r\n  );\r\n});\r\n"],"sourceRoot":""}