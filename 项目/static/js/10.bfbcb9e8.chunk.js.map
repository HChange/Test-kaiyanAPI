{"version":3,"sources":["components/Scroll/Scroll.js","pages/home/detail/detail.js"],"names":["Scroll","style","this","props","className","ref","children","BScroll","refs","scroll","tap","click","probeType","freeScroll","Component","detail","state","data","rep","related","id","consumption","top","bottom","onClick","history","go","controls","src","playUrl","title","category","author","name","description","collectionCount","realCollectionCount","location","to","pathname","replyCount","shareCount","replyList","length","user","nickname","message","icon","alt","itemList","map","item","type","console","log","setState","key","cover","replace","parseInt","duration","match","params","get","api","VIDEO_DETAIL","HOT_REP","RELATED","PureComponent"],"mappings":"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","file":"static/js/10.bfbcb9e8.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport BScroll from \"better-scroll\";\r\nimport \"./style.scss\";\r\nexport default class Scroll extends Component {\r\n  render() {\r\n    return (\r\n      <div style={this.props.style}  className=\"scroll\" ref=\"scroll\">\r\n        <div className=\"scrollContent\">{this.props.children}</div>\r\n      </div>\r\n    );\r\n  }\r\n  componentDidMount() {\r\n    new BScroll(this.refs.scroll, {\r\n      tap: true,\r\n      click: true,\r\n      probeType: 3,\r\n      freeScroll:true\r\n      //下拉\r\n      // pullDownRefresh: {\r\n      //   threshold: 44.44,\r\n      //   // stop: 44.44\r\n      // },\r\n      // //上拉\r\n      // pullUpLoad: {\r\n      //   threshold: 44.44,\r\n      //   // pullDownRefresh: true, // 默认stop: 40\r\n      //   stop: 40\r\n      // },\r\n\r\n    });\r\n    //下拉\r\n    // scroll.on(\"pullingDown\", () => {\r\n    //   // this.getData();\r\n    //   // this.props.onRefresh();\r\n    //   scroll.finishPullDown();\r\n    //   scroll.refresh();\r\n    // });\r\n    // //上拉\r\n    // scroll.on(\"pullingUp\", () => {\r\n    //   // this.getData();\r\n      \r\n    //   setTimeout(() => {\r\n    //     console.log(111);\r\n    //    scroll.finishPullUp();\r\n    //     // scroll.refresh();\r\n    //   }, 10000);\r\n     \r\n    // });\r\n\r\n    \r\n\r\n    //下拉\r\n   \r\n  }\r\n}\r\n","import React, { PureComponent } from \"react\";\r\n// import Header from \"../../../components/Header/Header\";\r\nimport { get } from \"../../../utils/http\";\r\nimport api from \"../../../utils/api\";\r\nimport \"./style.scss\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Scroll from \"../../../components/Scroll/Scroll\";\r\nexport default class detail extends PureComponent {\r\n  constructor(props) {\r\n\r\n    super(props);\r\n    this.state = {\r\n      data: {},\r\n      rep: {},\r\n      related: {},\r\n      id:\"\"\r\n    };\r\n  }\r\n\r\n  render() {\r\n    let data = this.state.data;\r\n    let rep = this.state.rep;\r\n    let related = this.state.related;\r\n    return (\r\n      <div className=\"detail page\">\r\n        {data.consumption && (\r\n          <Scroll style={{ top: 0, bottom: 0 }}>\r\n            <span\r\n              className=\"back iconfont icon-fanhui\"\r\n              onClick={() => this.props.history.go(-1)}\r\n            ></span>\r\n            {/* <Header title=\"详情\" className=\"\" hasBack={true} {...this.props} /> */}\r\n            <video controls src={this.state.data.playUrl}></video>\r\n            <div className=\"description border-bottom\">\r\n              <h1>{data.title}</h1>\r\n              <p className=\"category\">\r\n                <span>{data.category}</span>&nbsp;/&nbsp;\r\n                <span>{data.author && data.author.name}</span>\r\n              </p>\r\n              <p className=\"desc\">{data.description}</p>\r\n\r\n              <div className=\"operator\">\r\n                <span className=\"like iconfont icon-xihuan\">\r\n                  <em>{data.consumption.collectionCount}</em>\r\n                </span>\r\n                <span className=\"share iconfont icon-fenxiang\">\r\n                  <em>{data.consumption.realCollectionCount}</em>\r\n                </span>\r\n\r\n                {this.props.location.state && (\r\n                  <Link\r\n                    to={{\r\n                      pathname:\r\n                        \"/home/detail/reply/\" + this.props.location.state.id,\r\n                      state: { id: this.props.location.state.id }\r\n                    }}\r\n                  >\r\n                    <span className=\" discuss iconfont icon-xiaoxi\">\r\n                      <em>{data.consumption.replyCount}</em>\r\n                    </span>\r\n                  </Link>\r\n                )}\r\n                <span className=\"download iconfont icon-xiazai\">\r\n                  <em>{data.consumption.shareCount}</em>\r\n                </span>\r\n              </div>\r\n            </div>\r\n            {rep.replyList.length > 0 && (\r\n              <Link\r\n                to={{\r\n                  pathname:\r\n                    \"/home/detail/reply/\" + this.props.location.state.id,\r\n                  state: { id: this.props.location.state.id }\r\n                }}\r\n              >\r\n                <div className=\"hot border-bottom\">\r\n                  <span className=\"left\">H</span>\r\n                  <div className=\"center more-overflow\">\r\n                    <span className=\"name\">\r\n                      热评 · {rep.replyList[0].user.nickname}：\r\n                    </span>\r\n                    {rep.replyList[0].message}\r\n                  </div>\r\n                  <span className=\"right iconfont icon-youfanhui-copy\"></span>\r\n                </div>\r\n              </Link>\r\n            )}\r\n            <div className=\"author border-bottom\">\r\n              <img src={data.author.icon} alt={data.author.id} />\r\n              <div className=\"center\">\r\n                <h3>{data.author.name}</h3>\r\n                <p className=\"text-overflow\">{data.author.description}</p>\r\n              </div>\r\n              <div className=\"follow\" id={data.author.id}>\r\n                +关注\r\n              </div>\r\n            </div>\r\n            <div className=\"related\">\r\n              <h2>相关推荐</h2>\r\n              {related.itemList &&\r\n                // eslint-disable-next-line array-callback-return\r\n                related.itemList.map(item => {\r\n                  if (item.type !== \"textCard\") {\r\n                    return (\r\n                      <Link\r\n                        className=\"card\"\r\n                        onClick={() => {\r\n                          console.log(item.data.id);\r\n\r\n                          this.setState({\r\n                            ...this.state,\r\n                            id: item.data.id\r\n                          });\r\n                        }}\r\n                        to={{\r\n                          pathname: \"/home/station\",\r\n                          state: { id: item.data.id }\r\n                        }}\r\n                        key={item.data.id}\r\n                      >\r\n                        <img\r\n                          src={item.data.cover.detail.replace(\r\n                            \"quality/60\",\r\n                            \"quality/100\"\r\n                          )}\r\n                          alt={item.data.id}\r\n                        />\r\n                        <span className=\"duration\">\r\n                          {parseInt(item.data.duration / 60) < 10\r\n                            ? \"0\" + parseInt(item.data.duration / 60)\r\n                            : parseInt(item.data.duration / 60)}\r\n                          :\r\n                          {item.data.duration % 60 < 10\r\n                            ? \"0\" + (item.data.duration % 60)\r\n                            : item.data.duration % 60}\r\n                        </span>\r\n                        <div className=\"right\">\r\n                          <p className=\"title\">{item.data.title}</p>\r\n                          <p className=\"bottom\">\r\n                            <span className=\"category\">\r\n                              #{item.data.category}\r\n                            </span>\r\n                            <span className=\"iconfont icon-fenxiang\"></span>\r\n                          </p>\r\n                        </div>\r\n                      </Link>\r\n                    );\r\n                  }\r\n                })}\r\n            </div>\r\n          </Scroll>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n  async componentDidMount() {\r\n    this.setState({\r\n      ...this.state,\r\n      id: this.props.location.state\r\n        ? this.props.location.state.id\r\n        : this.props.match.params.id\r\n    });\r\n    let data = await get(api.VIDEO_DETAIL + this.props.location.state.id);\r\n    // console.log(data);\r\n    let rep = await get(\r\n      api.HOT_REP.replace(\"{{id}}\", this.props.location.state.id)\r\n    );\r\n    let related = await get(\r\n      api.RELATED.replace(\"{{id}}\", this.props.location.state.id)\r\n    );\r\n    console.log(related);\r\n\r\n    this.setState({\r\n      ...this.state,\r\n      data,\r\n      rep,\r\n      related\r\n    });\r\n  }\r\n}\r\n"],"sourceRoot":""}